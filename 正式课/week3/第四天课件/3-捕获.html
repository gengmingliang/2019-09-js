<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

</body>

</html>
<script>
    var reg = /\d+?/
    var str = `珠峰2019培训2020`
    var res = reg.exec(str)//返回值是一个数组 第一项是大正则捕获到的内容 第二项都是小分组捕获的内容
    console.log(res)
    // 捕获的贪婪性一次性会把所有符合条件的捕获到 加一个元字符？可以解决贪婪性
    // 捕获的懒惰性 只捕获一次 加一个修饰符g可以解决懒惰性

    var reg = /\d+/g
    var str = `珠峰2019培训2020`
    var res = reg.exec(str)//lastIndex属性控制下一次捕获的起始索引

    //封装一个可以一次性捕获所有符合条件的内容方法execAll
    RegExp.prototype.execAll = function (str) {
        // 利用 exec 可以一直匹配 直到匹配到 null;
        // this 就是 reg;
        var that = this;
        if (!that.global) {
            // 没有全局修饰符 g ;
            that = eval(that.toString() + 'g');//  '/xxx/g'
        }
        var res = that.exec(str);
        var ary = [];
        while (res) {
            ary.push(res);
            res = that.exec(str);
        }
        // ary.push(res)
        return ary;
    }

    //封装一个getcookie的方法 使用execAll 让getcookie位于字符串的原型上
    String.prototype.getCookie = function (key) {
        var reg = /([^; ?]+)=([^; ?]+)/g
        var ary = reg.execAll(this)
        console.log(ary)
        //把数组ary中的每一项 转成对象的格式
        var obj = {}
        ary.forEach(item => {
            //item代表数组中的每一项 都是一个小数组
            obj[item[1]] = item[2]
        })
        console.log(obj)
        return key ? obj[key] : obj
    }
    var cookie = "BIDUPSID=4512CDEFFBB27CE490D09C4DEA10541B; PSTM=1567473657; BD_UPN=12314753; BDORZ=B490B5EBF6F3CD402E515D22BCDA1598; sug=3; ORIGIN=0; bdime=0; BAIDUID=4512CDEFFBB27CE490D09C4DEA10541B:SL=0:NR=10:FG=1; pgv_pvi=3174222848; cflag=13%3A3; COOKIE_SESSION=41414_1_8_6_8_4_0_0_7_3_0_0_133798_0_0_2_1567699991_1567741398_1567741396%7C9%230_1_1567741396%7C1; H_PS_645EC=a75dK2MTxaclp3fUlg6RcBclzG41M4%2BQ3zlpsxuN%2BxPaFz617VRXnLr8MGU; BD_HOME=1; H_PS_PSSID=1448_21101_29073_29522_29518_29721_29567_29221; sugstore=0"
    cookie.getCookie()
    cookie.getCookie('BIDUPSID')
</script>